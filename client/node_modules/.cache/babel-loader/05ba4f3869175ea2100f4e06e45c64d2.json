{"ast":null,"code":"export const POST_HAS_ERRORED = 'POST_HAS_ERRORED';\nexport const FORM_IS_POSTING = 'FORM_IS_POSTING';\nexport const POST_DATA_SUCCESS = 'POST_DATA_SUCCESS';\nexport const hasErrored = bool => {\n  return {\n    type: POST_HAS_ERRORED,\n    hasErrored: bool\n  };\n};\nexport const isPosting = bool => {\n  return {\n    type: FORM_IS_POSTING,\n    isPosting: bool\n  };\n}; // Redux-thunk, \n\nexport const uploadData = (url, data) => {\n  // it returns a function!!!!\n  return dispatch => {\n    dispatch(isPosting(true));\n    fetch(url, {\n      // content-type header should not be specified!\n      method: 'POST',\n      body: data\n    }).then(response => {\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n\n      dispatch(isPosting(false));\n      return response;\n    }).then(response => {\n      console.log(response.json());\n      return response.json();\n    }).then(success => {\n      dispatch(postDataSuccess(success));\n    }).catch(() => dispatch(hasErrored(true)));\n  };\n};\nexport const postDataSuccess = response => {\n  return {\n    type: POST_DATA_SUCCESS,\n    response\n  };\n};","map":{"version":3,"sources":["/Users/mac/Workspaces/cpsc436assignment2/client/src/actions/postActions.js"],"names":["POST_HAS_ERRORED","FORM_IS_POSTING","POST_DATA_SUCCESS","hasErrored","bool","type","isPosting","uploadData","url","data","dispatch","fetch","method","body","then","response","ok","Error","statusText","console","log","json","success","postDataSuccess","catch"],"mappings":"AAAA,OAAO,MAAMA,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,eAAe,GAAG,iBAAxB;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AAEP,OAAO,MAAMC,UAAU,GAAIC,IAAD,IAAU;AAChC,SAAO;AACHC,IAAAA,IAAI,EAAEL,gBADH;AAEHG,IAAAA,UAAU,EAAEC;AAFT,GAAP;AAIH,CALM;AAOP,OAAO,MAAME,SAAS,GAAIF,IAAD,IAAU;AAC/B,SAAO;AACHC,IAAAA,IAAI,EAAEJ,eADH;AAEHK,IAAAA,SAAS,EAAEF;AAFR,GAAP;AAIH,CALM,C,CAOP;;AACA,OAAO,MAAMG,UAAU,GAAG,CAACC,GAAD,EAAKC,IAAL,KAAc;AACpC;AAEA,SAAQC,QAAD,IAAc;AACjBA,IAAAA,QAAQ,CAACJ,SAAS,CAAC,IAAD,CAAV,CAAR;AACAK,IAAAA,KAAK,CAACH,GAAD,EAAM;AACP;AACAI,MAAAA,MAAM,EAAE,MAFD;AAGPC,MAAAA,IAAI,EAAEJ;AAHC,KAAN,CAAL,CAKKK,IALL,CAKWC,QAAD,IAAc;AAChB,UAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AACd,cAAMC,KAAK,CAACF,QAAQ,CAACG,UAAV,CAAX;AACH;;AACDR,MAAAA,QAAQ,CAACJ,SAAS,CAAC,KAAD,CAAV,CAAR;AACA,aAAOS,QAAP;AACH,KAXL,EAYKD,IAZL,CAYWC,QAAD,IAAc;AAChBI,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACM,IAAT,EAAZ;AACA,aAAON,QAAQ,CAACM,IAAT,EAAP;AACH,KAfL,EAgBKP,IAhBL,CAgBUQ,OAAO,IAAI;AACbZ,MAAAA,QAAQ,CAACa,eAAe,CAACD,OAAD,CAAhB,CAAR;AACH,KAlBL,EAmBKE,KAnBL,CAmBW,MAAMd,QAAQ,CAACP,UAAU,CAAC,IAAD,CAAX,CAnBzB;AAoBH,GAtBD;AAuBH,CA1BM;AA4BP,OAAO,MAAMoB,eAAe,GAAIR,QAAD,IAAc;AACzC,SAAO;AACHV,IAAAA,IAAI,EAAEH,iBADH;AAEHa,IAAAA;AAFG,GAAP;AAIH,CALM","sourcesContent":["export const POST_HAS_ERRORED = 'POST_HAS_ERRORED'\nexport const FORM_IS_POSTING = 'FORM_IS_POSTING'\nexport const POST_DATA_SUCCESS = 'POST_DATA_SUCCESS'\n\nexport const hasErrored = (bool) => {\n    return {\n        type: POST_HAS_ERRORED,\n        hasErrored: bool\n    };\n}\n\nexport const isPosting = (bool) => {\n    return {\n        type: FORM_IS_POSTING,\n        isPosting: bool\n    };\n}\n\n// Redux-thunk, \nexport const uploadData = (url,data) => {\n    // it returns a function!!!!\n    \n    return (dispatch) => {\n        dispatch(isPosting(true));\n        fetch(url, {\n            // content-type header should not be specified!\n            method: 'POST',\n            body: data,\n          })\n            .then((response) => {\n                if (!response.ok) {\n                    throw Error(response.statusText);\n                }\n                dispatch(isPosting(false));\n                return response;\n            })\n            .then((response) => {\n                console.log(response.json());\n                return response.json();\n            })\n            .then(success => {\n                dispatch(postDataSuccess(success));\n            })\n            .catch(() => dispatch(hasErrored(true)));\n    };\n}\n\nexport const postDataSuccess = (response) => {\n    return {\n        type: POST_DATA_SUCCESS,\n        response\n    };\n}"]},"metadata":{},"sourceType":"module"}